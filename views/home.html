{% extends "base2.html" %} {% block main %}

<link rel="stylesheet" href="/static/css/fileinput.css">
<script src="/static/js/fileinput.js"></script>
<script src="/static/js/locales/zh.js"></script>
<script src="/static/js/vue.min.js"></script>

<script>
    $(function () {

        var bean = JSON.parse(localStorage.getItem('bean'));
        var _pageSize = 20;
        // console.log(JSON.stringify(bean));

        var vm = new Vue({
            el: '#product-list',
            data: {
                books: [],
                pageItems: [],
                currentPage: 1,
                editedBookCopy: {},
                editedBook: {},
                postData: null,
                bookFile: '',
                bookImg: '',
                thumbnailChanged: true,
                txtFileChanged: true
            },
            methods: {
                isDate: function (str) {
                    var reg = /^(\d{4})-(\d{2})-(\d{2})$/;
                    if (str == '') {
                        return false;
                    }
                    var arr = reg.exec(str);

                    if (!reg.test(str) || parseInt(RegExp.$2) >= 12 || parseInt(RegExp.$3) >= 31) {
                        return false;
                    }
                    return true;
                },

                resetEditData: function () {
                    this.editedBookCopy = {};
                    this.postData = null;
                    this.bookFile = '';
                    this.bookImg = '';
                    this.thumbnailChanged = true;
                    this.txtFileChanged = true;
                },

                showError: function (tips) {
                    $('#myAlert').show();
                    $('#myAlert')[0].innerText = tips;
                    setTimeout(function () {
                        $('#myAlert').hide();
                    }, 3000)
                },

                sendForm: function (postData) {
                    var that = this;
                    if (that.thumbnailChanged && that.txtFileChanged) {
                        if (that.bookFile.length == 0 || that.bookImg.length == 0) {
                            return;
                        }
                    }
                    if (that.thumbnailChanged && that.bookImg.length == 0) {
                        return;
                    }
                    if (that.txtFileChanged && that.bookFile.length == 0) {
                        return;
                    }

                    // AJAXæäº¤JSON:
                    if (that.thumbnailChanged) {
                        vm.postData.thumbnail_url = vm.bookImg;
                    }
                    if (that.txtFileChanged) {
                        vm.postData.txt_url = vm.bookFile;
                    }
                    $.ajax({
                        type: 'post',
                        headers: {
                            'Authorization': 'Bearer ' + bean.token
                        },
                        dataType: 'json',
                        contentType: 'application/json',
                        url: '/api/editBook',
                        data: JSON.stringify(vm.postData)
                    }).done(function (res) {
                        $('#myLoading').hide();
                        $('#updateBookBtn').attr('disabled', false);
                        $('#editBookModal').modal('hide');

                        if (res.code == 0) {
                            $('#myModel').modal('show');
                            $('#myModel').find('.modal-body').text('æ›´æ–°æˆåŠŸï¼');
                            for (var attr in that.editedBook) {
                                that.editedBook[attr] = that.editedBookCopy[attr];
                                if (attr == 'thumbnail_url'  && that.thumbnailChanged) {
                                    that.editedBook[attr] = '/images/' + vm.bookImg;
                                }
                                if (attr == 'txt_url'  && that.txtFileChanged) {
                                    that.editedBook[attr] = vm.bookFile;
                                }
                            }
                        } else {
                            $('#myModel').modal('show');
                            $('#myModel').find('.modal-body').text(res.msg);
                        }
                        that.resetEditData();
                    }).fail(function (jqXHR, textStatus) {
                        // Not 200:
                        $('#myLoading').hide();
                        $('#updateBookBtn').attr('disabled', false);
                        $('#editBookModal').modal('hide');
                        that.resetEditData();
                        alert('Error: ' + jqXHR.status);
                    });
                },

                editBook: function (book) {
                    var that = this;
                    that.editedBook = book;
                    var editObj = JSON.parse(JSON.stringify(book));
                    if (!editObj) {
                        return;
                    }
                    var typeDesc = 'å°è¯´';
                    if (editObj.type == 2) {
                        typeDesc = 'å¬ä¹¦';
                    }
                    if (editObj.type == 3) {
                        typeDesc = 'æ‚å¿—';
                    }
                    if (editObj.type == 4) {
                        typeDesc = 'æ¼«ç”»';
                    }
                    if (editObj.type == 5) {
                        typeDesc = 'èµ„è®¯';
                    }
                    editObj.typeDesc = typeDesc;
                    that.editedBookCopy = editObj;
                    $('#thumbnail').fileinput('refresh', { msgPlaceholder: editObj.thumbnail_url.substring(8) });
                    $('#txtFile').fileinput('refresh', { msgPlaceholder: editObj.txt_url });

                    $('#editBookModal').modal('show');
                },

                updateBook: function () {
                    var that = this;
                    var isChange = false;
                    for (var attr in that.editedBook) {
                        if (that.editedBookCopy[attr] != that.editedBook[attr]) {
                            isChange = true;
                            break;
                        }
                    }
                    if (!isChange) {
                        that.showError('æ²¡æœ‰ä¿®æ”¹é¡¹ï¼')
                        return;
                    }

                    if ($('#category').val() == 'è¯·é€‰æ‹©...') {
                        $('#category').css("border-color", "red");
                    }
                    if ($('#book_type').val() == 'è¯·é€‰æ‹©...') {
                        $('#book_type').css("border-color", "red");
                    }
                    if ($('#publisher_date').val().length > 0 && !vm.isDate($('#publisher_date').val())) {
                        that.showError('æ—¶é—´æ ¼å¼ä¸æ­£ç¡®ï¼Œæ ¼å¼å¦‚ï¼š2018-02-26')
                    }
                    if ($('#thumbnail').val() == '') {
                        that.thumbnailChanged = false;
                    }
                    if ($('#txtFile').val() == '') {
                        that.txtFileChanged = false;
                    }

                    $('#myLoading').show();
                    $('#updateBookBtn').attr('disabled', true);
                    vm.postData = {
                        bookId: that.editedBookCopy.id,
                        name: that.editedBookCopy.name,
                        author: that.editedBookCopy.author,
                        introduction: that.editedBookCopy.introduction,
                        category: that.editedBookCopy.category,
                        type: that.editedBookCopy.type
                    };
                    var publisher = that.editedBookCopy.publisher;
                    var publisherDate = that.editedBookCopy.publisher_date;
                    var wordsNum = that.editedBookCopy.words_num;

                    if (publisher && publisher.length > 0) {
                        vm.postData.publisher = publisher;
                    }
                    if (publisherDate && publisherDate.length > 0) {
                        vm.postData.publisher_date = publisherDate;
                    }
                    if (wordsNum && wordsNum.length > 0) {
                        vm.postData.words_num = wordsNum;
                    }

                    if (that.thumbnailChanged) {
                        $('#thumbnail').fileinput('upload');
                    }
                    if (that.txtFileChanged) {
                        $('#txtFile').fileinput('upload');
                    }
                    if (!that.thumbnailChanged && !that.txtFileChanged) {
                        vm.sendForm(vm.postData);
                    }
                },

                deleteBook: function (id) {
                    var that = this;
                    if (!id) {
                        return;
                    }
                    var params = { bookId: id };
                    $.ajax({
                        type: 'post',
                        headers: {
                            'Authorization': 'Bearer ' + bean.token
                        },
                        dataType: 'json',
                        contentType: 'application/json',
                        url: '/api/deleteBook',
                        data: JSON.stringify(params)
                    }).done(function (res) {
                        if (res.code == 0) {
                            $('#myModel').modal('show');
                            $('#myModel').find('.modal-body').text('åˆ é™¤æˆåŠŸï¼');
                            var deleteBookId = res.data;
                            var i;
                            for (i = 0; i < that.books.length; i++) {
                                if (that.books[i].id === deleteBookId) {
                                    that.books.splice(i, 1);
                                    return;
                                }
                            }
                        } else {
                            $('#myModel').modal('show');
                            $('#myModel').find('.modal-body').text(res.msg);
                        }
                    }).fail(function (jqXHR, textStatus) {
                        // Not 200:
                        alert('Error: ' + jqXHR.status);
                    });
                },

                changePage: function (pageItem) {
                    if (pageItem.class == 'page-item disabled') {
                        return;
                    }
                    if (pageItem.desc == 'ä¸Šä¸€é¡µ') {
                        this.currentPage--;
                    } else if (pageItem.desc == 'ä¸‹ä¸€é¡µ') {
                        this.currentPage++;
                    } else if (pageItem.desc == '...') {
                        this.currentPage = 10;
                    } else {
                        this.currentPage = parseInt(pageItem.desc);
                    }
                    // console.log('ğŸŒ¹ğŸŒ¹CurrentPage is ' + this.currentPage);
                    this.getBooks(this.currentPage - 1);
                },

                getBooks: function (page) {
                    $.ajax({
                        type: 'POST',
                        headers: {
                            'Authorization': 'Bearer ' + bean.token
                        },
                        dataType: 'json',
                        contentType: 'application/json',
                        url: '/api/books',
                        data: JSON.stringify({
                            start: page * _pageSize,
                            pageSize: _pageSize
                        })
                    }).done(function (res) {
                        if (res.code == 0) {
                            res.data.rows.map(element => {
                                if (element.thumbnail_url.indexOf('http') < 0) {
                                    element.thumbnail_url = '/images/' + element.thumbnail_url;
                                }
                            });
                            vm.books = [];
                            vm.books = res.data.rows;
                            vm.pageItems = [];
                            var pages = Math.ceil(res.data.count / _pageSize);
                            if (pages > 1) {
                                for (var i = 0; i < pages + 2; i++) {
                                    var item = { class: 'page-item', desc: i.toString() };
                                    if (i == 0) {
                                        item.class = 'page-item';
                                        item.desc = 'ä¸Šä¸€é¡µ';
                                    }
                                    if (i == pages + 1) {
                                        item.class = 'page-item';
                                        item.desc = 'ä¸‹ä¸€é¡µ';
                                    }
                                    if (i == page + 1) { // å½“å‰é¡µ
                                        item.class = 'page-item disabled';
                                    }
                                    vm.pageItems.push(item);
                                }
                                if (1 == page + 1) { // å½“å‰é¡µæ˜¯ç¬¬ä¸€é¡µ
                                    vm.pageItems[0].class = 'page-item disabled';
                                }
                                if (pages == page + 1) { // å½“å‰é¡µæ˜¯æœ€åä¸€é¡µ
                                    vm.pageItems[vm.pageItems.length - 1].class = 'page-item disabled';
                                }
                                if (pages > 15) {
                                    vm.pageItems[11].desc = '...';
                                    vm.pageItems.splice(12, pages + 2 - 12 - 3);
                                }
                            }
                        } else {
                            $('#myModel').modal('show');
                            $('#myModel').find('.modal-body').text(res.msg);
                        }
                    }).fail(function (jqXHR, textStatus) {
                        alert('Error: ' + jqXHR.status);
                    });
                }
            }
        });

        // vm.getBooks(0);

        $('#myModel').on('hidden.bs.modal', function (e) {
            var modal_body_text = $('#myModel').find('.modal-body')[0].innerText;
            if (modal_body_text == 'åˆ é™¤æˆåŠŸï¼') {

            } else if (modal_body_text == 'è®¤è¯å¤±è´¥' || modal_body_text == 'token is undefined') {
                window.location.href = '/login';
            } else {

            }
        });

        $("#book_type").change(function () {
            $('#book_type').css("border-color", "");
            if ($('#book_type').val() == 'å°è¯´' || $('#book_type').val() == 'è¯·é€‰æ‹©...') {
                vm.editedBookCopy.type = 1;
            } else if ($('#book_type').val() == 'å¬ä¹¦') {
                vm.editedBookCopy.type = 2;
            } else if ($('#book_type').val() == 'æ‚å¿—') {
                vm.editedBookCopy.type = 3;
            } else if ($('#book_type').val() == 'æ¼«ç”»') {
                vm.editedBookCopy.type = 4;
            } else if ($('#book_type').val() == 'èµ„è®¯') {
                vm.editedBookCopy.type = 5;
            }
        });

        $('#txtFile').fileinput({
            showUpload: false,
            previewFileType: 'any',
            showPreview: false,
            language: 'zh',
            browseLabel: 'æµè§ˆ...',
            uploadUrl: 'uploadFile',
            browseClass: 'btn btn-outline-secondary',
            removeClass: 'btn btn-danger',
            allowedFileTypes: ['text'], // é™åˆ¶æ–‡ä»¶ç±»å‹ä¸ºå›¾ç‰‡
            allowedFileExtensions: ['text'], // é™åˆ¶æ–‡ä»¶åç¼€åä¸º['image', 'html', 'text', 'video', 'audio', 'flash', 'object']
            maxFileCount: 1,  // é™åˆ¶æœ€å¤š3å¼ å›¾ç‰‡
            // maxFileSize: 1024, // é™åˆ¶å›¾ç‰‡å¤§å°ï¼Œæœ€å¤§1024KB
            // allowedPreviewTypes: ['image'], // å…è®¸é¢„è§ˆçš„æ–‡ä»¶ç±»å‹
            initialCaption: 'æ·»åŠ å›¾ä¹¦txtæ–‡ä»¶', // åˆå§‹åŒ–è¯´æ˜æ¡†æ¡†ï¼Œæ¯”å¦‚è¯¥é¡¹ç›®ä¸Šé»˜è®¤æ˜¾ç¤ºï¼šå¯ä»¥é€‰æ‹©æœ€å¤š3å¼ å›¾ç‰‡ï¼Œæ ¼å¼ä¸ºpngæˆ–è€…jpgï¼Œå¤§å°ä¸è¶…è¿‡1M
            layoutTemplates: {
                main1: '{preview}\n' +
                    '<div class="input-group {class}">\n' +
                    '   <div class="input-group-prepend">\n' +
                    '       {browse}\n' +
                    '       {remove}\n' +
                    '   </div>\n' +
                    '   {caption}\n' +
                    '</div>',
                footer: '<div class="file-thumbnail-footer">\n' +
                    '    <div class="file-caption-name">{caption}{size}</div>\n' +
                    '</div>'
            }
        });
        $('#txtFile').on('filecleared', function (event) {
            $('#txtFile').fileinput('refresh', { msgPlaceholder: 'æ·»åŠ å›¾ä¹¦txtæ–‡ä»¶' });
        });
        $('#txtFile').on('fileerror', function (event, data, msg) {
            console.log(JSON.stringify(data) + 'ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹' + JSON.stringify(msg));
        });
        $('#txtFile').on('change', function(event) {
            console.log("txtFile change");
            vm.editedBookCopy.txt_url = 'changed';
        });
        $('#txtFile').on('fileuploaded', function (event, data, previewId, index) {
            console.log('ğŸŒ¹ğŸŒ¹fileuploadedğŸŒ¹ğŸŒ¹' + JSON.stringify(data.response));
            vm.bookFile = data.response.data;
            vm.sendForm(vm.postData);
        });

        $('#thumbnail').fileinput({
            showUpload: false,
            previewFileType: 'any',
            showPreview: false,
            uploadUrl: 'uploadFile',
            language: 'zh',
            browseLabel: 'æµè§ˆ...',
            browseClass: 'btn btn-outline-secondary',
            removeClass: 'btn btn-danger',
            allowedFileTypes: ['image'], // é™åˆ¶æ–‡ä»¶ç±»å‹ä¸ºå›¾ç‰‡
            allowedFileExtensions: ['image'], // é™åˆ¶æ–‡ä»¶åç¼€åä¸º['image', 'html', 'text', 'video', 'audio', 'flash', 'object']
            maxFileCount: 1,  // é™åˆ¶æœ€å¤š3å¼ å›¾ç‰‡
            // maxFileSize: 1024, // é™åˆ¶å›¾ç‰‡å¤§å°ï¼Œæœ€å¤§1024KB
            // allowedPreviewTypes: ['image'], // å…è®¸é¢„è§ˆçš„æ–‡ä»¶ç±»å‹
            initialCaption: 'æ·»åŠ å›¾ä¹¦å›¾ç‰‡', // åˆå§‹åŒ–è¯´æ˜æ¡†æ¡†ï¼Œæ¯”å¦‚è¯¥é¡¹ç›®ä¸Šé»˜è®¤æ˜¾ç¤ºï¼šå¯ä»¥é€‰æ‹©æœ€å¤š3å¼ å›¾ç‰‡ï¼Œæ ¼å¼ä¸ºpngæˆ–è€…jpgï¼Œå¤§å°ä¸è¶…è¿‡1M
            layoutTemplates: {
                main1: '{preview}\n' +
                    '<div class="input-group {class}">\n' +
                    '   <div class="input-group-prepend">\n' +
                    '       {browse}\n' +
                    '       {remove}\n' +
                    '   </div>\n' +
                    '   {caption}\n' +
                    '</div>',
                footer: '<div class="file-thumbnail-footer">\n' +
                    '    <div class="file-caption-name">{caption}{size}</div>\n' +
                    '</div>'
            }
        });
        $('#thumbnail').on('filecleared', function (event) {
            $('#thumbnail').fileinput('refresh', { msgPlaceholder: 'æ·»åŠ å›¾ä¹¦å›¾ç‰‡' });
        });
        $('#thumbnail').on('fileerror', function (event, data, msg) {
            console.log(JSON.stringify(data) + 'ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹' + JSON.stringify(msg));
        });
        $('#thumbnail').on('change', function(event) {
            console.log("thumbnail change");
            vm.editedBookCopy.thumbnail_url = 'changed';
        });
        $('#thumbnail').on('fileuploaded', function (event, data, previewId, index) {
            console.log("ğŸŒ¹ğŸŒ¹fileuploadedğŸŒ¹ğŸŒ¹" + JSON.stringify(data.response));
            vm.bookImg = data.response.data;
            vm.sendForm(vm.postData);
        });
    });
</script>

<div class="container-fluid">
    <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">
                            <span data-feather="home"></span>
                            ä¹¦åº“
                            <span class="sr-only">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/addBook">
                            <span data-feather="file"></span>
                            æ–°å»º
                        </a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="/addArchive">
                            <span data-feather="archive"></span>
                            æ–°å»ºèµ„è®¯
                        </a>
                    </li> -->
                </ul>
            </div>
        </nav>

        <main id="product-list" role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
            <h1 style="margin-bottom: 20px;">ä¹¦åº“</h1>
            <!-- <nav class="navbar navbar-light justify-content-between" style="background-color: #e3f2fd;">
                <a class="navbar-brand">Navbar</a>
                <form class="form-inline">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
            </nav> -->
            <div class="table-responsive" style="border-bottom: 1px solid #dee2e6;margin-bottom: 30px;">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th style="width:150px;border-bottom: 0;border-top: 0;">å›¾ä¹¦å°é¢</th>
                            <th style="border-bottom: 0;border-top: 0;">å›¾ä¹¦ä¿¡æ¯</th>
                            <th style="width:100px;border-bottom: 0;border-top: 0;">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="p in books">
                            <td style="position: relative;">
                                <img class="media-object" style="width:100px;padding: 10px 10px;position: absolute;top: 50%;transform: translateY(-50%);"
                                    v-bind:src="p.thumbnail_url">
                            </td>
                            <td>
                                <h2 class="media-heading" v-text="p.name"></h2>
                                <p>
                                    <span v-text="p.author"></span>
                                    <span>|</span>
                                    <span v-text="p.category">
                                </p>
                                <p v-text="p.introduction" style="color:silver; word-break: break-all;overflow: hidden;text-overflow: ellipsis;display: -webkit-box;-webkit-line-clamp: 3;-webkit-box-orient: vertical;"></p>
                            </td>
                            <td style="position: relative;">
                                <!-- <p style="font-size:2em; color:red;height:auto;position: absolute;top: 50%;transform: translateY(-50%);">
                                    <span v-text="p.rating"></span>
                                    <span v-if="p.rating" style="font-size:14px;">åˆ†
                                </p> -->
                                <p class="btn-group" role="group" aria-label="operate" style="position: absolute;top: 50%;transform: translateY(-50%);">
                                    <button type="button" class="btn btn-link btn-sm" v-on:click="editBook(p)" v-if="p.type != 5">ç¼–è¾‘</button>
                                    <button type="button" class="btn btn-link btn-sm" v-on:click="deleteBook(p.id)">åˆ é™¤</button>
                                </p>
                            </td>
                            <td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-end">
                    <li v-for="item in pageItems" v-bind:class="item.class" v-on:click="changePage(item)">
                        <a class="page-link" v-text="item.desc"></a>
                    </li>
                </ul>
            </nav>

            <div class="modal fade bd-example-modal-lg" id="editBookModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">ç¼–è¾‘</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="alert alert-danger alert-dismissible fade show" role="alert" id="myAlert" style="display: none;">
                                å“å‘€ï¼Œå‡ºé”™äº†ï¼
                            </div>
                            <form id="product-form">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label class="col-form-label">ä¹¦å</label>
                                        <input v-model="editedBookCopy.name" type="text" maxlength="100" name="name" class="form-control" placeholder="ä¹¦å" value=""
                                            required>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="col-form-label">ä½œè€…</label>
                                        <input v-model="editedBookCopy.author" type="text" maxlength="100" name="author" class="form-control" placeholder="ä½œè€…" value=""
                                            required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label class="col-form-label">å‡ºç‰ˆç¤¾(å¯é€‰)</label>
                                        <input v-model="editedBookCopy.publisher" type="text" maxlength="100" name="publisher" class="form-control" placeholder="å‡ºç‰ˆç¤¾"
                                            value="">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="col-form-label">å‡ºç‰ˆæ—¶é—´(å¯é€‰)</label>
                                        <input v-model="editedBookCopy.publisher_date" type="text" maxlength="10" id='publisher_date' name="publisher_date" class="form-control"
                                            placeholder="ä¾‹ï¼š2018-02-26" value="">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="col-form-label">å­—æ•°(å¯é€‰)</label>
                                        <input v-model="editedBookCopy.words_num" type="text" maxlength="11" name="words_num" class="form-control" placeholder="å­—æ•°"
                                            value="" onkeyup="value=value.replace(/[^\d]/g,'')">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="category" class="col-form-label">åˆ†ç±»</label>
                                        <select v-model="editedBookCopy.category" class="form-control" id="category">
                                            <option disabled value="">è¯·é€‰æ‹©...</option>
                                            <option>ç§‘å¹»æ­¦ä¾ </option>
                                            <option>å†å²å°è¯´</option>
                                            <option>ç»æµç®¡ç†</option>
                                            <option>äººç‰©ä¼ è®°</option>
                                            <option>é’æ˜¥è¨€æƒ…</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="book_type" class="col-form-label">ç±»å‹</label>
                                        <select v-model="editedBookCopy.typeDesc" class="form-control" id="book_type">
                                            <option disabled value="">è¯·é€‰æ‹©...</option>
                                            <option>å°è¯´</option>
                                            <option>å¬ä¹¦</option>
                                            <!-- <option>æ‚å¿—</option>
                                            <option>æ¼«ç”»</option>
                                            <option>èµ„è®¯</option> -->
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="thumbnail" class="col-form-label">å°é¢å›¾ç‰‡</label>
                                    <input type="file" class="form-control-file" name="file" id="thumbnail" accept="image/*">
                                </div>
                                <div class="form-group">
                                    <label for="txtFile" class="col-form-label">å›¾ä¹¦txtæ–‡ä»¶</label>
                                    <input type="file" class="form-control-file" name="file" id="txtFile" accept=".txt">
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label">ç®€ä»‹</label>
                                    <textarea v-model="editedBookCopy.introduction" class="form-control" maxlength="500" placeholder="å­—æ•°æœ€å¤š500" style="resize: vertical;"
                                        id="introduction" rows="3" required></textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">å…³é—­</button>
                            <button type="button" id="updateBookBtn" class="btn btn-primary" v-on:click="updateBook()">æ›´æ–°</button>
                            <img id="myLoading" src="../static/images/loading.gif" style="display: none;height: 30px;width: 30px;margin-left: 10px;">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

{% endblock %}